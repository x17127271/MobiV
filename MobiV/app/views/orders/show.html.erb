<% provide(:title, "Show Order") %>


<div class="container">
  <div class="row mt-3 mb-3">
    <p id="notice"><%= notice %></p>
  </div>
  <% if @order.user.email == @user.email %>
  <div class="row mt-3">
    <h1>Order Details</h1>
  </div>
  <div class="row mt-3">
    <table class="table table-hover table-sm">
      <thead>
        <tr>
          <th scope="col">Order</th>
          <th scope="col">Order Date</th>
          <th scope="col">Ordered By</th>
          <th scope="col">Order Status</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <%= @order.id %>
          </td>
          <td>
            <%= @order.order_date %>
          </td>
          <td>
            <%= @order.user.email %>
          </td>
          <td>
            <%= @order.status %>
          </td>
          <td>
            <%= link_to 'Edit', edit_order_path(@order), :class =>"btn btn-outline-primary btn-sm" %>                      
          </td>        
        </tr>
      </tbody>
      </table>
    </div>
    <div class="row">
      <h3>Order Items</h3>
    </div>
    <div class="row">
    <table class="table table-hover table-sm">
      <caption>List of items</caption>
      <thead>
        <tr>
          <th scope="col">Product</th>
          <th scope="col">Quantity</th>
          <th scope="col">Price</th>
        </tr>
      </thead>
      <tbody>
        <% @orderitems.each do |orderitem| %>
          <tr>            
            <td>
              <%= orderitem.title %>
            </td>
            <td>
              <%= orderitem.quantity %>
            </td>
            <td>
              <%= number_to_currency(orderitem.price, :unit => "â‚¬")  %>
            </td>
          </tr>
        <% end %> 
      </tbody>
    </table>     
    </div>
    <div class="row">
      <%= link_to 'Back', orders_path, :class =>"btn btn-dark" %>      
    </div>
  <% else %>
    <div class="row">
      <h1>You did not place this order</h1>
    </div>
  <% end %>  
</div>

