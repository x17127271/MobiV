<% provide(:title, "Orders") %>

<div class="container">
  <div class="row mt-3 mb-3">
   <p id="notice"><%= notice %></p>
  </div class="row">
  <div class="row mt-e">
    <h1>Orders</h1>
  </div class="row">
  <div class="row">
    <table class="table table-hover table-sm">
      <caption>List of orders</caption>
      <thead>
        <tr>
          <th scope="col">Order date</th>
          <th scope="col">User</th>
          <th scope="col">Status</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @orders.each do |order| %>
          <% if order.user.email == @user.email %>
          <tr>
            <td>
              <%= order.order_date %>
            </td>
            <td>
              <%= order.user_id %>
            </td>
            <td>
              <%= order.status %>
            </td>
            <td>
              <%= link_to 'Show', order, class: 'btn btn-outline-primary btn-sm' %>
              <% if user_signed_in? && current_user.admin == true %> 
                <%= link_to 'Edit', edit_order_path(order), class: 'btn btn-outline-primary btn-sm' %>
              <% end %>
              <%= link_to 'Destroy', order, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-danger btn-sm' %>
            </td>        
          </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>
</div>